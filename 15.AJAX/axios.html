<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script src="../node_modules/axios/dist/axios.min.js"></script>
  <script>
    /* axios.get('api/list',{
      // axios默认只有在HTTP状态码以2开头的才是成功态，其它都是失败态
      ValidityState:function(status){
        return status >=200 && status<300;
      }
    }); */
    // axios.head();
    // axios.delete();

    // axios.post();
    // axios.put()

    // 执行axios.xxx()都会返回一个promise实例，请求成功会改变promise为
    // 成功态fulfilled，执行resolve，请求失败会改变为失败态rejected，执行
    // reject

    /* axios.get('json.json', {
      params: {
        name: 'wwj'
      },
      headers: {
        'AAA': 'wwj'
      }
    }).then(res => {
      console.log(res)
      return res.data;
    }).catch(error => {
      console.log(error)
      return Promise.reject(error.message)
    }).then(res => {
      console.log(res)
    }) */
  </script>
  <script>
    /* axios.defaults.baseURL = 'http://127.0.0.1:5500/'
    axios.defaults.transformRequest = data=>{
      if(!data) return data;
      let str = ``;
      for(let key in data){
        if(data.hasOwnProperty(key)){
          str+=`&${key}=${data[key]}`;
        }
      }
      return str.substring(1)
    }
    axios.interceptors.request.use(config=>{
      console.log(config)
    })
    axios.post('./json.json', {
      lx: 1,
      from: 'wx'
    }, {

      headers: {
        'AAA': 'wwj'
      }
    }).then(res => {
      console.log(res)
      return res.data;
    }).catch(error => {
      console.log(error)
      return Promise.reject(error.message)
    }).then(res => {
      console.log(res)
    }).catch(err=>{
      console.log(err)
    }) */
  </script>
  <script src="./Promise-ajax-plugin.js"></script>
  <script>
    /* _axios.get('./json.json',{
      timeout:500
    }).then(res=>{
      console.log(res)
    }).catch(error=>{
      console.log(error)
    }) */
    fnc()
    async function fnc(){
      try {
        let result = await _axios.post('./json.json',{
          timeout:500
        })
        
      } catch (error) {
        
        console.log(error)
      }

    }
  </script>
</body>

</html>